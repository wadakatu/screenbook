---
/**
 * LinkIcon component displays an appropriate icon based on the link type.
 * If type is not specified, it attempts to infer the type from the URL.
 */

interface Props {
	type?: "figma" | "storybook" | "docs" | "other"
	url: string
	size?: number
}

const { type, url, size = 16 } = Astro.props

/**
 * Infer link type from URL if not explicitly specified
 */
function inferType(url: string): "figma" | "storybook" | "docs" | "other" {
	if (url.includes("figma.com")) return "figma"
	if (url.includes("storybook")) return "storybook"
	return "other"
}

const resolvedType = type ?? inferType(url)
---

{
	resolvedType === "figma" && (
		<svg
			aria-hidden="true"
			width={size}
			height={size}
			viewBox="0 0 24 24"
			fill="currentColor"
		>
			<path d="M5.5 2C4.12 2 3 3.12 3 4.5v3C3 8.88 4.12 10 5.5 10H8v4H5.5C4.12 14 3 15.12 3 16.5S4.12 19 5.5 19H8v.5c0 1.38 1.12 2.5 2.5 2.5s2.5-1.12 2.5-2.5V19h2.5c1.38 0 2.5-1.12 2.5-2.5S16.88 14 15.5 14H13v-4h2.5c1.38 0 2.5-1.12 2.5-2.5S16.88 5 15.5 5H13V4.5C13 3.12 11.88 2 10.5 2H5.5zM8 5h2.5c.83 0 1.5.67 1.5 1.5V7h-4V5zm0 4h4v4H8v-4zm0 8H5.5c-.83 0-1.5-.67-1.5-1.5S4.67 14 5.5 14H8v3zm2.5 3c-.83 0-1.5-.67-1.5-1.5V17h3v1.5c0 .83-.67 1.5-1.5 1.5zM13 17h2.5c.83 0 1.5-.67 1.5-1.5s-.67-1.5-1.5-1.5H13v3zM8 5H5.5c-.83 0-1.5.67-1.5 1.5S4.67 8 5.5 8H8V5zm5 0h2.5c.83 0 1.5.67 1.5 1.5S16.33 8 15.5 8H13V5z" />
		</svg>
	)
}

{
	resolvedType === "storybook" && (
		<svg
			aria-hidden="true"
			width={size}
			height={size}
			viewBox="0 0 24 24"
			fill="currentColor"
		>
			<path d="M16.34 1.1l-.16 3.28c-.01.15.1.28.25.28.07 0 .14-.03.19-.08l1.13-.9 1.01.82c.09.07.22.06.3-.03.05-.05.07-.11.07-.18l-.14-3.4c0-.07.03-.13.08-.18.05-.05.12-.07.18-.07l2.16-.14a.13.13 0 01.14.12v.01l.09 19.6a.13.13 0 01-.08.12l-.01.01c-.02.01-.05.02-.08.02-1.58-.12-1.7-.41-2.12-1.2-1.19-2.24-3.3-6.24-3.3-6.24-.18-.4-.57-.4-.57.07 0 .16.01.32.02.48.17 2.56-.38 5.48-2.57 6.3-.12.05-.26.09-.4.12l-8.12.45c-.11 0-.2-.08-.2-.19l-.05-.01.59-19.22a.26.26 0 01.25-.25l12.43-.74c.07.01.12.04.12.12zm-4.45 6.55c0 .44 3.06.24 3.48-.06 0-3.03-1.61-4.61-4.56-4.61-2.96 0-4.64 1.62-4.64 4.04 0 4.19 5.65 4.27 5.65 6.56 0 .65-.28 1.02-1 1.02-.9 0-1.28-.47-1.23-2.06 0-.33-3.49-.44-3.6 0-.26 3.65 2.01 4.71 4.88 4.71 2.78 0 4.96-1.48 4.96-4.15 0-4.49-5.74-4.39-5.74-6.61 0-.9.62-1.01 1-1.01.42 0 1.12.06.8 2.17z" />
		</svg>
	)
}

{
	resolvedType === "docs" && (
		<svg
			aria-hidden="true"
			width={size}
			height={size}
			viewBox="0 0 24 24"
			fill="none"
			stroke="currentColor"
			stroke-width="2"
		>
			<path
				stroke-linecap="round"
				stroke-linejoin="round"
				d="M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"
			/>
		</svg>
	)
}

{
	resolvedType === "other" && (
		<svg
			aria-hidden="true"
			width={size}
			height={size}
			viewBox="0 0 24 24"
			fill="none"
			stroke="currentColor"
			stroke-width="2"
		>
			<path
				stroke-linecap="round"
				stroke-linejoin="round"
				d="M13.5 6H5.25A2.25 2.25 0 003 8.25v10.5A2.25 2.25 0 005.25 21h10.5A2.25 2.25 0 0018 18.75V10.5m-10.5 6L21 3m0 0h-5.25M21 3v5.25"
			/>
		</svg>
	)
}
